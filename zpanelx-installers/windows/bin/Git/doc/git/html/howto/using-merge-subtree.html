<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 7.0.2" />
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a { color: blue; }
a:visited { color: fuchsia; }

em {
  font-style: italic;
}

strong {
  font-weight: bold;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1 {
  border-bottom: 2px solid silver;
}
h2 {
  border-bottom: 2px solid silver;
  padding-top: 0.5em;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.2em;
}
span#email {
}
span#revision {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble,
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-right: 10%;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock > div.content {
  padding-left: 2.0em;
}
div.quoteblock .attribution {
  text-align: right;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.verseblock div.content {
  white-space: pre;
}

div.imageblock div.content { padding-left: 0; }
div.imageblock img { border: 1px solid silver; }
span.image img { border-style: none; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: italic;
}
dd > *:first-child {
  margin-top: 0;
}

ul, ol {
    list-style-position: outside;
}
ol.olist2 {
  list-style-type: lower-alpha;
}

div.tableblock > table {
  border-color: #527bbd;
  border-width: 3px;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}

div.hlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
td.hlist1 {
  vertical-align: top;
  font-style: italic;
  padding-right: 0.8em;
}
td.hlist2 {
  vertical-align: top;
}

@media print {
  div#footer-badges { display: none; }
}
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-content {
  padding-left: 2.0em;
}

div.exampleblock-content {
  border-left: 2px solid silver;
  padding-left: 0.5em;
}
</style>
<title>How to use the subtree merge strategy</title>
</head>
<body>
<div id="header">
<h1>How to use the subtree merge strategy</h1>
</div>
<div id="preamble">
<div class="sectionbody">
<p>There are situations where you want to include contents in your project
from an independently developed project. You can just pull from the
other project as long as there are no conflicting paths.</p>
<p>The problematic case is when there are conflicting files. Potential
candidates are Makefiles and other standard filenames. You could merge
these files but probably you do not want to.  A better solution for this
problem can be to merge the project as its own subdirectory. This is not
supported by the <em>recursive</em> merge strategy, so just pulling won't work.</p>
<p>What you want is the <em>subtree</em> merge strategy, which helps you in such a
situation.</p>
<p>In this example, let's say you have the repository at <tt>/path/to/B</tt> (but
it can be an URL as well, if you want). You want to merge the <em>master</em>
branch of that repository to the <tt>dir-B</tt> subdirectory in your current
branch.</p>
<p>Here is the command sequence you need:</p>
<div class="listingblock">
<div class="content">
<pre><tt>$ git remote add -f Bproject /path/to/B <b>(1)</b>
$ git merge -s ours --no-commit Bproject/master <b>(2)</b>
$ git read-tree --prefix=dir-B/ -u Bproject/master <b>(3)</b>
$ git commit -m "Merge B project as our subdirectory" <b>(4)</b>

$ git pull -s subtree Bproject master <b>(5)</b></tt></pre>
</div></div>
<ol>
<li>
<p>
name the other project "Bproject", and fetch.
</p>
</li>
<li>
<p>
prepare for the later step to record the result as a merge.
</p>
</li>
<li>
<p>
read "master" branch of Bproject to the subdirectory "dir-B".
</p>
</li>
<li>
<p>
record the merge result.
</p>
</li>
<li>
<p>
maintain the result with subsequent merges using "subtree"
</p>
</li>
</ol>
<p>The first four commands are used for the initial merge, while the last
one is to merge updates from <em>B project</em>.</p>
</div>
</div>
<h2>Comparing <em>subtree</em> merge with submodules</h2>
<div class="sectionbody">
<ul>
<li>
<p>
The benefit of using subtree merge is that it requires less
  administrative burden from the users of your repository. It works with
  older (before Git v1.5.2) clients and you have the code right after
  clone.
</p>
</li>
<li>
<p>
However if you use submodules then you can choose not to transfer the
  submodule objects. This may be a problem with the subtree merge.
</p>
</li>
<li>
<p>
Also, in case you make changes to the other project, it is easier to
  submit changes if you just use submodules.
</p>
</li>
</ul>
</div>
<h2>Additional tips</h2>
<div class="sectionbody">
<ul>
<li>
<p>
If you made changes to the other project in your repository, they may
  want to merge from your project. This is possible using subtree &#8212; it
  can shift up the paths in your tree and then they can merge only the
  relevant parts of your tree.
</p>
</li>
<li>
<p>
Please note that if the other project merges from you, then it will
  connects its history to yours, which can be something they don't want
  to.
</p>
</li>
</ul>
</div>
<div id="footer">
<div id="footer-text">
Last updated 08-Jun-2008 01:34:36 UTC
</div>
</div>
</body>
</html>
