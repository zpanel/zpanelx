<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>ZPanel > Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">

    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57"   href="/etc/styles/zpanelx/img/ico/apple-touch-icon-57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/etc/styles/zpanelx/img/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72"   href="/etc/styles/zpanelx/img/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/etc/styles/zpanelx/img/ico/apple-touch-icon-144-precomposed.png">

    <link rel="icon" href="/etc/styles/zpanelx/img/ico/fav16.png"  sizes="16x16"   type="image/png">
    <link rel="icon" href="/etc/styles/zpanelx/img/ico/fav32.png"  sizes="32x32"   type="image/png">
    <link rel="icon" href="/etc/styles/zpanelx/img/ico/fav48.png"  sizes="48x48"   type="image/png">
    <link rel="icon" href="/etc/styles/zpanelx/img/ico/fav64.png"  sizes="64x64"   type="image/png">
    <link rel="icon" href="/etc/styles/zpanelx/img/ico/fav128.png" sizes="128x128" type="image/png">

    <link rel="icon" href="/etc/styles/zpanelx/img/ico/fav32.png">
    <!--[if IE]><link rel="shortcut icon" href="/etc/styles/zpanelx/img/ico/favicon.ico"><![endif]-->

    <meta name="msapplication-TileColor" content="#222222">
    <meta name="msapplication-TileImage" content="/etc/styles/zpanelx/img/ico/fav144.png">

    <!-- HTML5 shim for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]><script src="/etc/styles/zpanelx/js/html5shiv.js"></script><![endif]-->

    <!-- Anti ClickJacking Protection! -->
    <style id="antiClickjack">body{display:none !important;}</style>
    <script>
        if (self === top) {
            var antiClickjack = document.getElementById("antiClickjack");
            antiClickjack.parentNode.removeChild(antiClickjack);
        } else {
            top.location = self.location;
        }
    </script>

    <!-- Styles -->
    <link href="/etc/styles/zpanelx/css/bootstrap.css" rel="stylesheet">
    <link href="/etc/styles/zpanelx/css/login.css" rel="stylesheet">
</head>

<body>     

<div class="wrapper">
	<div class="panel">
	    <div class="panel-heading text-center">
	        <span class="logo"></span>
	    </div>
		    
    	<!-- Alerts -->
    	<div class="alerts">
		    <?php
		    if (isset($_GET['invalidlogin'])) {
		    echo '
		    <div class="alert alert-danger in">
		        <button type="button" class="close" data-dismiss="alert">&times;</button>
		        Invalid Username or Password!
		    </div>';
		    }
		    if (isset($_GET['loggedout'])) {
		    echo '
		    <div class="alert alert-success in">
		        <button type="button" class="close" data-dismiss="alert">&times;</button>
		        Logout Successful!
		    </div>';
		    }
		    if(isset($_GET['sessionIssue'])){
		    echo '
		    <div class="alert alert-danger in">
		        <button type="button" class="close" data-dismiss="alert">&times;</button>
		        You have been logged out, please login again.
		    </div>';
		    }
		    if (isset($_GET['passwordreset'])) {
		    echo '
		    <div class="alert alert-success in">
		        <button type="button" class="close" data-dismiss="alert">&times;</button>
		        Your password has been reset!
		    </div>';
		    }
		    ?>
		</div>
	    <!-- End Alerts -->   
	    
		<!-- Password Reset Form -->
		<?php if (isset($_GET['resetkey'])) { ?>
		<form action="<?php echo $_SERVER['PHP_SELF']; ?>?resetkey=<?php echo $_GET['resetkey']; ?>" method="post" name="frmZConfirm" id="frmZConfirm" class="form-horizontal">               
	        <div class="panel-content">
		        <div class="row">
		            <label for="inNewPass" class="col-5 control-label">New Password</label>
		            <div class="col-7">
		                <input type="password" id="inNewPass" name="inNewPass" placeholder="New Password" required>
		            </div>
		        </div>
		        <div class="row">
		            <label for="inNewPass2" class="col-5 control-label">Confirm Password</label>
		            <div class="col-7">
		                <input type="password" id="inNewPass2" name="inNewPass2" placeholder="Confirm Password" required>
		            </div>
		        </div>
		        <div class="row">
		            <label for="inConfEmail" class="col-5 control-label">EMail</label>
		            <div class="col-7">
		                <input type="email" id="inConfEmail" name="inConfEmail" placeholder="EMail" required>
		            </div>
		        </div>
	        </div>
		    <div class="row panel-footer text-center">
		        <div class="col-12">
		            <button type="submit" name="sublogin2" class="btn btn-primary">Submit</button>
		        </div>
		    </div>
		    <?php echo runtime_csfr::Token(); ?>
		</form>
		<!-- End Password Reset Form -->
		
		<?php } else {?>
		
		<!-- Forgot Password Form -->
		<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="frmZForgot" id="frmZForgot" class="form-horizontal" style="display: none;">               
			<div class="panel-content">	        
		        <div class="row">
		            <label for="inputEmail" class="col-3 control-label">Email</label>
		            <div class="col-9">
		                <input type="email" id="inputEmail" name="inForgotPassword" placeholder="Email" required>
		            </div>
		        </div>
		    </div>
		    <div class="row panel-footer">
		        <div class="col-6">
		            <a href="javascript:void(0);" id="load-login">Back To Login</a>
		        </div>
		        <div class="col-6 text-right">
		            <button type="submit" name="sublogin2" class="btn btn-primary">Login</button>
		        </div>
		    </div>
		    <?php echo runtime_csfr::Token(); ?>
		</form>
		<!-- End Forgot Password Form -->
                
		<!-- Login Form -->
		<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="frmZLogin" id="frmZLogin" class="form-horizontal">
		<div class="panel-content">               
		        <div class="row">
		            <label for="inputUsername" class="col-3 control-label">Username</label>
		            <div class="col-9">
		                <input type="text" id="inputUsername" name="inUsername" placeholder="Username" required>
		            </div>
		        </div>
		        <div class="row">
		            <label for="inputPassword" class="col-3 control-label">Password</label>
		            <div class="col-9">
		                <input type="password" id="inPassword" name="inPassword" placeholder="Password" required>
		                <div class="checkbox">
		                    <label>
		                    <input type="checkbox" name="inRemember" value="1" checked> Remember Me
		                    </label>
		                </div>
		            </div>
		        </div>
	        </div>
		    <div class="row panel-footer">
		        <div class="col-6">
		            <a href="javascript:void(0);" id="load-pw">Forgot Password?</a>
		        </div>
		        <div class="col-6 text-right">
		            <button type="submit" name="sublogin2" class="btn btn-primary">Login</button>
		        </div>
		    </div>
		    <?php echo runtime_csfr::Token(); ?>
		</form>
		<!-- End Login Form -->
		
		<?php }?>
			
	</div> <!-- /panel -->
	
	<div class="col-12 text-center powered">
		Powered By: <a href="http://www.zpanelcp.com/" target="_new">ZPanel <?php echo sys_versions::ShowZpanelVersion(); ?></a>
	</div>
	
</div> <!-- /wrapper -->

    <!-- javascript
    ================================================== -->
    <script src="/etc/styles/zpanelx/js/jquery.js"></script>
    <script src="/etc/styles/zpanelx/js/bootstrap-alert.js"></script>

    <script>
        //Login Form Transitions
        $('#load-pw').click(function() {
            $('#frmZLogin').slideUp('slow', function() {
            	$('#frmZForgot').slideDown('slow');
            });
        });
        $('#load-login').click(function() {
            $('#frmZForgot').slideUp('slow', function() {
                $('#frmZLogin').slideDown('slow');
            });
        });
        
        //Clear URL After Alert Acknowledge
        $('.close').click(function() {
            window.history.replaceState(null, null, 'index.php');
        });
    </script>

</body>
</html>
