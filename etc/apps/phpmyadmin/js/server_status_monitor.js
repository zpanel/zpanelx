var runtime={},server_time_diff,server_os,is_superuser,server_db_isLocal;AJAX.registerOnload("server_status_monitor.js",function(){var a=$("#js_data");server_time_diff=new Date().getTime()-a.find("input[name=server_time]").val();server_os=a.find("input[name=server_os]").val();is_superuser=a.find("input[name=is_superuser]").val();server_db_isLocal=a.find("input[name=server_db_isLocal]").val()});AJAX.registerTeardown("server_status_monitor.js",function(){$("#emptyDialog").remove();$("#addChartDialog").remove();$("a.popupLink").unbind("click");$("body").unbind("click")});AJAX.registerOnload("server_status_monitor.js",function(){$("<div />").attr("id","emptyDialog").appendTo("#page_content");$("#addChartDialog").appendTo("#page_content");$("a.popupLink").click(function(){var a=$(this);$("div."+a.attr("href").substr(1)).show().offset({top:a.offset().top+a.height()+5,left:a.offset().left}).addClass("openedPopup");return false});$("body").click(function(a){$("div.openedPopup").each(function(){var b=$(this);var c=b.offset();if(a.pageX<c.left||a.pageY<c.top||a.pageX>c.left+b.outerWidth()||a.pageY>c.top+b.outerHeight()){b.hide().removeClass("openedPopup")}})})});AJAX.registerTeardown("server_status_monitor.js",function(){$('a[href="#rearrangeCharts"], a[href="#endChartEditMode"]').unbind("click");$('div.popupContent select[name="chartColumns"]').unbind("change");$('div.popupContent select[name="gridChartRefresh"]').unbind("change");$('a[href="#addNewChart"]').unbind("click");$('a[href="#exportMonitorConfig"]').unbind("click");$('a[href="#importMonitorConfig"]').unbind("click");$('a[href="#clearMonitorConfig"]').unbind("click");$('a[href="#pauseCharts"]').unbind("click");$('a[href="#monitorInstructionsDialog"]').unbind("click");$('input[name="chartType"]').unbind("click");$('input[name="useDivisor"]').unbind("click");$('input[name="useUnit"]').unbind("click");$('select[name="varChartList"]').unbind("click");$('a[href="#kibDivisor"]').unbind("click");$('a[href="#mibDivisor"]').unbind("click");$('a[href="#submitClearSeries"]').unbind("click");$('a[href="#submitAddSeries"]').unbind("click");$("#chartPreset").unbind("click");$("#chartStatusVar").unbind("click");destroyGrid()});AJAX.registerOnload("server_status_monitor.js",function(){$("div.tabLinks").show();$("#loadingMonitorIcon").remove();if(!codemirror_editor){var v=$("#sqlquery");if(v.length>0&&typeof CodeMirror!="undefined"){codemirror_editor=CodeMirror.fromTextArea(v[0],{lineNumbers:true,matchBrackets:true,indentUnit:4,mode:"text/x-mysql"})}}$("#logAnalyseDialog .datetimefield").each(function(){PMA_addDatepicker($(this))});var q=null;var K=null;var o;var l="1.0";runtime={charts:null,refreshTimeout:null,refreshRequest:null,chartAI:0,redrawCharts:false,dataList:[],gridMaxPoints:20,xmin:-1,xmax:-1};var a=null;var J={columns:3,chartSize:{width:295,height:250},gridMaxPoints:"auto",gridRefresh:5000};var t=false;var I={qce:{title:PMA_messages.strQueryCacheEfficiency,series:[{label:PMA_messages.strQueryCacheEfficiency}],nodes:[{dataPoints:[{type:"statusvar",name:"Qcache_hits"},{type:"statusvar",name:"Com_select"}],transformFn:"qce"}],maxYLabel:0},qcu:{title:PMA_messages.strQueryCacheUsage,series:[{label:PMA_messages.strQueryCacheUsed}],nodes:[{dataPoints:[{type:"statusvar",name:"Qcache_free_memory"},{type:"servervar",name:"query_cache_size"}],transformFn:"qcu"}],maxYLabel:0}};var G=[];var d,c,D,B;var i=false;var k;switch(server_os){case"WINNT":$.extend(I,{cpu:{title:PMA_messages.strSystemCPUUsage,series:[{label:PMA_messages.strAverageLoad}],nodes:[{dataPoints:[{type:"cpu",name:"loadavg"}]}],maxYLabel:100},memory:{title:PMA_messages.strSystemMemory,series:[{label:PMA_messages.strTotalMemory,fill:true},{dataType:"memory",label:PMA_messages.strUsedMemory,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"MemTotal"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"MemUsed"}],valueDivisor:1024}],maxYLabel:0},swap:{title:PMA_messages.strSystemSwap,series:[{label:PMA_messages.strTotalSwap,fill:true},{label:PMA_messages.strUsedSwap,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"SwapTotal"}]},{dataPoints:[{type:"memory",name:"SwapUsed"}]}],maxYLabel:0}});break;case"Linux":$.extend(I,{cpu:{title:PMA_messages.strSystemCPUUsage,series:[{label:PMA_messages.strAverageLoad}],nodes:[{dataPoints:[{type:"cpu",name:"irrelevant"}],transformFn:"cpu-linux"}],maxYLabel:0},memory:{title:PMA_messages.strSystemMemory,series:[{label:PMA_messages.strBufferedMemory,fill:true},{label:PMA_messages.strUsedMemory,fill:true},{label:PMA_messages.strCachedMemory,fill:true},{label:PMA_messages.strFreeMemory,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"Buffers"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"MemUsed"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"Cached"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"MemFree"}],valueDivisor:1024}],maxYLabel:0},swap:{title:PMA_messages.strSystemSwap,series:[{label:PMA_messages.strCachedSwap,fill:true},{label:PMA_messages.strUsedSwap,fill:true},{label:PMA_messages.strFreeSwap,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"SwapCached"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"SwapUsed"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"SwapFree"}],valueDivisor:1024}],maxYLabel:0}});break;case"SunOS":$.extend(I,{cpu:{title:PMA_messages.strSystemCPUUsage,series:[{label:PMA_messages.strAverageLoad}],nodes:[{dataPoints:[{type:"cpu",name:"loadavg"}]}],maxYLabel:0},memory:{title:PMA_messages.strSystemMemory,series:[{label:PMA_messages.strUsedMemory,fill:true},{label:PMA_messages.strFreeMemory,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"MemUsed"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"MemFree"}],valueDivisor:1024}],maxYLabel:0},swap:{title:PMA_messages.strSystemSwap,series:[{label:PMA_messages.strUsedSwap,fill:true},{label:PMA_messages.strFreeSwap,fill:true}],nodes:[{dataPoints:[{type:"memory",name:"SwapUsed"}],valueDivisor:1024},{dataPoints:[{type:"memory",name:"SwapFree"}],valueDivisor:1024}],maxYLabel:0}});break}var h={c0:{title:PMA_messages.strQuestions,series:[{label:PMA_messages.strQuestions}],nodes:[{dataPoints:[{type:"statusvar",name:"Questions"}],display:"differential"}],maxYLabel:0},c1:{title:PMA_messages.strChartConnectionsTitle,series:[{label:PMA_messages.strConnections},{label:PMA_messages.strProcesses}],nodes:[{dataPoints:[{type:"statusvar",name:"Connections"}],display:"differential"},{dataPoints:[{type:"proc",name:"processes"}]}],maxYLabel:0},c2:{title:PMA_messages.strTraffic,series:[{label:PMA_messages.strBytesSent},{label:PMA_messages.strBytesReceived}],nodes:[{dataPoints:[{type:"statusvar",name:"Bytes_sent"}],display:"differential",valueDivisor:1024},{dataPoints:[{type:"statusvar",name:"Bytes_received"}],display:"differential",valueDivisor:1024}],maxYLabel:0}};if(server_db_isLocal){h.c3=I.cpu;h.c4=I.memory;h.c5=I.swap}var y={cogButton:{symbol:"url("+pmaThemeImage+"s_cog.png)",x:-36,symbolFill:"#B5C9DF",hoverSymbolFill:"#779ABF",_titleKey:"settings",menuName:"gridsettings",menuItems:[{textKey:"editChart",onclick:function(){w(this)}},{textKey:"removeChart",onclick:function(){L(this)}}]}};$('a[href="#rearrangeCharts"], a[href="#endChartEditMode"]').click(function(M){M.preventDefault();t=!t;if($(this).attr("href")=="#endChartEditMode"){t=false}$("#chartGrid div svg").find("*[zIndex=20], *[zIndex=21], *[zIndex=19]").toggle(t);$('a[href="#endChartEditMode"]').toggle(t);if(t){$("div.popupContent").hide().removeClass("openedPopup");$("#chartGrid").sortableTable({ignoreRect:{top:8,left:u().width-63,width:54,height:24},events:{drop:function(S,P,X){var Y,N,V;var O=$(S).children().first().attr("id");if($(P).children().length>0){V=$(P).children().first().attr("id")}$.each(runtime.charts,function(ab,ac){if(ac.chart.options.chart.renderTo==O){Y=ab}if(V&&ac.chart.options.chart.renderTo==V){N=ab}});if(N){if(Y){dragChart=runtime.charts[Y];runtime.charts[Y]=runtime.charts[N];runtime.charts[N]=dragChart}else{var aa=[];var R=parseInt(N.substr(1));var U=X.col+X.row*a.columns;var Z=[];var T={};var W=0;$.each(runtime.charts,function(ab,ac){if(ab!=N){aa.push(ab)}});aa.sort();for(var Q=0;Q<aa.length;Q++){if(aa[Q]==U){T["c"+(W++)]=runtime.charts[N];U=-1}T["c"+(W++)]=runtime.charts[aa[Q]]}if(U!=-1){T["c"+(W++)]=runtime.charts[N]}runtime.charts=T}e()}}}})}else{$("#chartGrid").sortableTable("destroy");e()}return false});$('div.popupContent select[name="chartColumns"]').change(function(){a.columns=parseInt(this.value);var M=u();$("#chartGrid tr td").css("width",M.width+"px");var P;var Q=$("#chartGrid tr:first");var R=0;while(Q.length!=0){P=1;Q.find("td").each(function(){if(P>a.columns){if(Q.next().length==0){Q.after("<tr></tr>")}Q.next().prepend($(this))}P++});if(Q.next().length>0){var O=a.columns-Q.find("td").length;for(var N=0;N<O;N++){Q.append(Q.next().find("td:first"));Q.nextAll().each(function(){if($(this).next().length!=0){$(this).append($(this).next().find("td:first"))}})}}Q=Q.next();R++}$.each(runtime.charts,function(S,T){T.chart.setSize(M.width,M.height,false)});if(a.gridMaxPoints=="auto"){runtime.gridMaxPoints=Math.round((M.width-40)/12)}runtime.xmin=new Date().getTime()-server_time_diff-runtime.gridMaxPoints*a.gridRefresh;runtime.xmax=new Date().getTime()-server_time_diff+a.gridRefresh;if(t){$("#chartGrid").sortableTable("refresh")}e()});$('div.popupContent select[name="gridChartRefresh"]').change(function(){a.gridRefresh=parseInt(this.value)*1000;clearTimeout(runtime.refreshTimeout);if(runtime.refreshRequest){runtime.refreshRequest.abort()}runtime.xmin=new Date().getTime()-server_time_diff-runtime.gridMaxPoints*a.gridRefresh;runtime.refreshTimeout=setTimeout(n,a.gridRefresh);e()});$('a[href="#addNewChart"]').click(function(N){N.preventDefault();var M={};M[PMA_messages.strAddChart]=function(){var P=$('input[name="chartType"]:checked').val();if(P=="preset"){K=I[$('#addChartDialog select[name="presetCharts"]').prop("value")]}else{if(!K||!K.nodes||K.nodes.length==0){alert(PMA_messages.strAddOneSeriesWarning);return}}K.title=$('input[name="chartTitle"]').val();f($.extend(true,{},K));K=null;e();$(this).dialog("close")};M[PMA_messages.strClose]=function(){K=null;$("span#clearSeriesLink").hide();$("#seriesPreview").html("");$(this).dialog("close")};var O=$('#addChartDialog select[name="presetCharts"]');if(O.html().length==0){$.each(I,function(P,Q){O.append('<option value="'+P+'">'+Q.title+"</option>")});O.change(function(){$('input[name="chartTitle"]').val(O.find(":selected").text());$("#chartPreset").prop("checked",true)});$("#chartPreset").click(function(){$('input[name="chartTitle"]').val(O.find(":selected").text())});$("#chartStatusVar").click(function(){$('input[name="chartTitle"]').val($("#chartSeries").find(":selected").text().replace(/_/g," "))});$("#chartSeries").change(function(){$('input[name="chartTitle"]').val($("#chartSeries").find(":selected").text().replace(/_/g," "))})}$("#addChartDialog").dialog({width:"auto",height:"auto",buttons:M});$("#addChartDialog #seriesPreview").html("<i>"+PMA_messages.strNone+"</i>");return false});$('a[href="#exportMonitorConfig"]').click(function(N){N.preventDefault();var O={};$.each(runtime.charts,function(P,Q){O[P]={};O[P].nodes=Q.nodes;O[P].settings=Q.settings;O[P].title=Q.title});var M={monitorCharts:O,monitorSettings:a};$("<form />",{"class":"disableAjax",method:"post",action:"file_echo.php?"+PMA_commonParams.get("common_query")+"&filename=1",style:"display:none;"}).append($("<input />",{type:"hidden",name:"monitorconfig",value:$.toJSON(M)})).appendTo("body").submit().remove()});$('a[href="#importMonitorConfig"]').click(function(N){N.preventDefault();$("#emptyDialog").dialog({title:PMA_messages.strImportDialogTitle});$("#emptyDialog").html(PMA_messages.strImportDialogMessage+':<br/><form action="file_echo.php?'+PMA_commonParams.get("common_query")+'&import=1" method="post" enctype="multipart/form-data"><input type="file" name="file"> <input type="hidden" name="import" value="1"> </form>');var M={};M[PMA_messages.strImport]=function(){var P,O;$("body").append(P=$('<iframe id="monitorConfigUpload" style="display:none;"></iframe>'));var Q=P[0].contentWindow.document;Q.open();Q.close();mew=Q;P.load(function(){var R;try{var T=$("body",$("iframe#monitorConfigUpload")[0].contentWindow.document).html();R=$.secureEvalJSON(T.substring(T.indexOf("{"),T.lastIndexOf("}")+1))}catch(S){alert(PMA_messages.strFailedParsingConfig);$("#emptyDialog").dialog("close");return}if(!R||!R.monitorCharts||!R.monitorCharts){alert(PMA_messages.strFailedParsingConfig);$("#emptyDialog").dialog("close");return}try{window.localStorage.monitorCharts=$.toJSON(R.monitorCharts);window.localStorage.monitorSettings=$.toJSON(R.monitorSettings);E()}catch(S){alert(PMA_messages.strFailedBuildingGrid);window.localStorage.removeItem("monitorCharts");window.localStorage.removeItem("monitorSettings");E()}$("#emptyDialog").dialog("close")});$("body",Q).append(O=$("#emptyDialog").find("form"));O.submit();$("#emptyDialog").append('<img class="ajaxIcon" src="'+pmaThemeImage+'ajax_clock_small.gif" alt="">')};M[PMA_messages.strCancel]=function(){$(this).dialog("close")};$("#emptyDialog").dialog({width:"auto",height:"auto",buttons:M})});$('a[href="#clearMonitorConfig"]').click(function(M){M.preventDefault();window.localStorage.removeItem("monitorCharts");window.localStorage.removeItem("monitorSettings");window.localStorage.removeItem("monitorVersion");$(this).hide();E()});$('a[href="#pauseCharts"]').click(function(M){M.preventDefault();runtime.redrawCharts=!runtime.redrawCharts;if(!runtime.redrawCharts){$(this).html(PMA_getImage("play.png")+" "+PMA_messages.strResumeMonitor)}else{$(this).html(PMA_getImage("pause.png")+" "+PMA_messages.strPauseMonitor);if(!runtime.charts){s();$('a[href="#settingsPopup"]').show()}}return false});$('a[href="#monitorInstructionsDialog"]').click(function(M){M.preventDefault();var O=$("#monitorInstructionsDialog");O.dialog({width:595,height:"auto"}).find("img.ajaxIcon").show();var N=function(P){var Q={ajax_request:true,logging_vars:true};if(P){$.extend(Q,P)}$.get("server_status_monitor.php?"+PMA_commonParams.get("common_query"),Q,function(T){var S;if(T.success==true){S=T.message}else{return serverResponseError()}var R=PMA_getImage("s_success.png"),V="",U="";if(S.general_log=="ON"){if(S.slow_query_log=="ON"){V=PMA_messages.strBothLogOn}else{V=PMA_messages.strGenLogOn}}if(V.length==0&&S.slow_query_log=="ON"){V=PMA_messages.strSlowLogOn}if(V.length==0){R=PMA_getImage("s_error.png");V=PMA_messages.strBothLogOff}U="<b>"+PMA_messages.strCurrentSettings+'</b><br/><div class="smallIndent">';U+=R+V+"<br />";if(S.log_output!="TABLE"){U+=PMA_getImage("s_error.png")+" "+PMA_messages.strLogOutNotTable+"<br />"}else{U+=PMA_getImage("s_success.png")+" "+PMA_messages.strLogOutIsTable+"<br />"}if(S.slow_query_log=="ON"){if(S.long_query_time>2){U+=PMA_getImage("s_attention.png")+" "+$.sprintf(PMA_messages.strSmallerLongQueryTimeAdvice,S.long_query_time)+"<br />"}if(S.long_query_time<2){U+=PMA_getImage("s_success.png")+" "+$.sprintf(PMA_messages.strLongQueryTimeSet,S.long_query_time)+"<br />"}}U+="</div>";if(is_superuser){U+="<p></p><b>"+PMA_messages.strChangeSettings+"</b>";U+='<div class="smallIndent">';U+=PMA_messages.strSettingsAppliedGlobal+"<br/>";var W="TABLE";if(S.log_output=="TABLE"){W="FILE"}U+='- <a class="set" href="#log_output-'+W+'">'+$.sprintf(PMA_messages.strSetLogOutput,W)+" </a><br />";if(S.general_log!="ON"){U+='- <a class="set" href="#general_log-ON">'+$.sprintf(PMA_messages.strEnableVar,"general_log")+" </a><br />"}else{U+='- <a class="set" href="#general_log-OFF">'+$.sprintf(PMA_messages.strDisableVar,"general_log")+" </a><br />"}if(S.slow_query_log!="ON"){U+='- <a class="set" href="#slow_query_log-ON">'+$.sprintf(PMA_messages.strEnableVar,"slow_query_log")+" </a><br />"}else{U+='- <a class="set" href="#slow_query_log-OFF">'+$.sprintf(PMA_messages.strDisableVar,"slow_query_log")+" </a><br />"}W=5;if(S.long_query_time>2){W=1}U+='- <a class="set" href="#long_query_time-'+W+'">'+$.sprintf(PMA_messages.setSetLongQueryTime,W)+" </a><br />"}else{U+=PMA_messages.strNoSuperUser+"<br/>"}U+="</div>";O.find("div.monitorUse").toggle(S.log_output=="TABLE"&&(S.slow_query_log=="ON"||S.general_log=="ON"));O.find("div.ajaxContent").html(U);O.find("img.ajaxIcon").hide();O.find("a.set").click(function(){var X=$(this).attr("href").split("-");N({varName:X[0].substr(1),varValue:X[1]});O.find("img.ajaxIcon").show()})})};N();return false});$('input[name="chartType"]').change(function(){$("#chartVariableSettings").toggle(this.checked&&this.value=="variable");var M=$('input[name="chartTitle"]').val();if(M==PMA_messages.strChartTitle||M==$('label[for="'+$('input[name="chartTitle"]').data("lastRadio")+'"]').text()){$('input[name="chartTitle"]').data("lastRadio",$(this).attr("id")).val($('label[for="'+$(this).attr("id")+'"]').text())}});$('input[name="useDivisor"]').change(function(){$("span.divisorInput").toggle(this.checked)});$('input[name="useUnit"]').change(function(){$("span.unitInput").toggle(this.checked)});$('select[name="varChartList"]').change(function(){if(this.selectedIndex!=0){$("#variableInput").val(this.value)}});$('a[href="#kibDivisor"]').click(function(M){M.preventDefault();$('input[name="valueDivisor"]').val(1024);$('input[name="valueUnit"]').val(PMA_messages.strKiB);$("span.unitInput").toggle(true);$('input[name="useUnit"]').prop("checked",true);return false});$('a[href="#mibDivisor"]').click(function(M){M.preventDefault();$('input[name="valueDivisor"]').val(1024*1024);$('input[name="valueUnit"]').val(PMA_messages.strMiB);$("span.unitInput").toggle(true);$('input[name="useUnit"]').prop("checked",true);return false});$('a[href="#submitClearSeries"]').click(function(M){M.preventDefault();$("#seriesPreview").html("<i>"+PMA_messages.strNone+"</i>");K=null;$("#clearSeriesLink").hide()});$('a[href="#submitAddSeries"]').click(function(O){O.preventDefault();if($("#variableInput").val()==""){return false}if(K==null){$("#seriesPreview").html("");K={title:$('input[name="chartTitle"]').val(),nodes:[],series:[],maxYLabel:0}}var N={dataPoints:[{type:"statusvar",name:$("#variableInput").val()}],display:$('input[name="differentialValue"]').prop("checked")?"differential":""};if(N.dataPoints[0].name=="Processes"){N.dataPoints[0].type="proc"}if($('input[name="useDivisor"]').prop("checked")){N.valueDivisor=parseInt($('input[name="valueDivisor"]').val())}if($('input[name="useUnit"]').prop("checked")){N.unit=$('input[name="valueUnit"]').val()}var P=N.display=="differential"?", "+PMA_messages.strDifferential:"";P+=N.valueDivisor?(", "+$.sprintf(PMA_messages.strDividedBy,N.valueDivisor)):"";P+=N.unit?(", "+PMA_messages.strUnit+": "+N.unit):"";var M={label:$("#variableInput").val().replace(/_/g," ")};K.series.push(M);$("#seriesPreview").append("- "+M.label+P+"<br/>");K.nodes.push(N);$("#variableInput").val("");$('input[name="differentialValue"]').prop("checked",true);$('input[name="useDivisor"]').prop("checked",false);$('input[name="useUnit"]').prop("checked",false);$('input[name="useDivisor"]').trigger("change");$('input[name="useUnit"]').trigger("change");$('select[name="varChartList"]').get(0).selectedIndex=0;$("#clearSeriesLink").show();return false});$("#variableInput").autocomplete({source:variableNames});function s(){if(window.localStorage){if(window.localStorage.monitorCharts){runtime.charts=$.parseJSON(window.localStorage.monitorCharts)}if(window.localStorage.monitorSettings){a=$.parseJSON(window.localStorage.monitorSettings)}$('a[href="#clearMonitorConfig"]').toggle(runtime.charts!=null);if(runtime.charts!=null&&l!=window.localStorage.monitorVersion){$("#emptyDialog").dialog({title:PMA_messages.strIncompatibleMonitorConfig});$("#emptyDialog").html(PMA_messages.strIncompatibleMonitorConfigDescription);var O={};O[PMA_messages.strClose]=function(){$(this).dialog("close")};$("#emptyDialog").dialog({width:400,buttons:O})}}if(runtime.charts==null){runtime.charts=h}if(a==null){a=J}$('select[name="gridChartRefresh"]').val(a.gridRefresh/1000);$('select[name="chartColumns"]').val(a.columns);if(a.gridMaxPoints=="auto"){runtime.gridMaxPoints=Math.round((a.chartSize.width-40)/12)}else{runtime.gridMaxPoints=a.gridMaxPoints}runtime.xmin=new Date().getTime()-server_time_diff-runtime.gridMaxPoints*a.gridRefresh;runtime.xmax=new Date().getTime()-server_time_diff+a.gridRefresh;$("#chartGrid").html("<tr><td></td><td></td></tr><tr><td></td><td></td></tr>");o={width:$("#chartGrid td:nth-child(2)").offset().left-$("#chartGrid td:nth-child(1)").offset().left,height:$("#chartGrid tr:nth-child(2) td:nth-child(2)").offset().top-$("#chartGrid tr:nth-child(1) td:nth-child(1)").offset().top};$("#chartGrid").html("");var Q=[];$.each(runtime.charts,function(R,S){Q.push(R)});Q.sort();for(var N=0;N<Q.length;N++){f(runtime.charts[Q[N]],true)}var P=$("#chartGrid .monitorChart").length;var M=(a.columns-P%a.columns)%a.columns;for(var N=0;N<M;N++){$("#chartGrid tr:last").append("<td></td>")}$("#chartGrid tr td").css("width",u().width+"px");z();n()}function E(){var M=null;if(runtime.charts){M={};$.each(runtime.charts,function(Q,R){for(var P=0,N=R.nodes.length;P<N;P++){M[R.nodes[P].dataPoint]=[];for(var O=0,S=R.chart.series[P].data.length;O<S;O++){M[R.nodes[P].dataPoint].push([R.chart.series[P].data[O].x,R.chart.series[P].data[O].y])}}})}destroyGrid();s();if(M){$.each(runtime.charts,function(P,Q){for(var O=0,N=Q.nodes.length;O<N;O++){if(M[Q.nodes[O].dataPoint]){Q.chart.series[O].setData(M[Q.nodes[O].dataPoint])}}})}}function u(){var M=$("#logTable").innerWidth()/a.columns-(a.columns-1)*o.width;return{width:M,height:0.75*M}}function f(R,M){var P={title:escapeHtml(R.title),grid:{drawBorder:false,shadow:false,background:"rgba(0,0,0,0)"},axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,tickOptions:{formatString:"%H:%M:%S",showGridline:false},min:runtime.xmin,max:runtime.xmax},yaxis:{min:0,max:100,tickInterval:20}},seriesDefaults:{rendererOptions:{smooth:true},showLine:true,lineWidth:2},highlighter:{show:true}};if(P.title===PMA_messages.strSystemCPUUsage||P.title===PMA_messages.strQueryCacheEfficiency){P.axes.yaxis.tickOptions={formatString:"%d %%"}}else{if(P.title===PMA_messages.strSystemMemory||P.title===PMA_messages.strSystemSwap){P.stackSeries=true;P.axes.yaxis.tickOptions={formatter:$.jqplot.byteFormatter(2)}}else{if(P.title===PMA_messages.strTraffic){P.axes.yaxis.tickOptions={formatter:$.jqplot.byteFormatter(1)}}}}P.series=R.series;if($("#gridchart"+runtime.chartAI).length==0){var Q=$("#chartGrid .monitorChart").length;if(Q==0||!(Q%a.columns)){$("#chartGrid").append("<tr></tr>")}$("#chartGrid tr:last").append('<td><div id="gridChartContainer'+runtime.chartAI+'" class=""><div class="ui-state-default monitorChart" id="gridchart'+runtime.chartAI+'"></div></div></td>')}var O=[];for(N in R.series){O.push([[0,0]])}for(N in P.series){P.series[N].highlighter={show:true,tooltipContentEditor:function(aa,W,ab,X){var T='<div style="font-size:12px;background-color:#FFFFFF;opacity:0.95;filter:alpha(opacity=95);padding:5px;">';var V=aa.split(",")[0];T+="Time: "+V;T+='<span style="font-weight:bold;">';for(j in X.series){if(X.series[j].data.length>ab){var Z=X.series[j].data[ab][1]}else{return}var Y=X.series[j].label;var U=X.series[j].color;if(X.series[0]._yaxis.tickOptions.formatter){Z=X.series[0]._yaxis.tickOptions.formatter("%s",Z)}else{if(X.series[0]._yaxis.tickOptions.formatString){Z=$.sprintf(X.series[0]._yaxis.tickOptions.formatString,Z)}}T+='<br /><span style="color:'+U+'">'+Y+": "+Z+"</span>"}T+="</span></div>";return T}}}R.chart=$.jqplot("gridchart"+runtime.chartAI,O,P);for(N in R.chart.series){R.chart.series[N].data.shift()}var S=$("<div />").css("padding","0.5em");for(var N in R.chart.series){S.append($("<div />").append($("<div>").css({width:"1em",height:"1em",background:R.chart.seriesColors[N]}).addClass("floatleft")).append($("<div>").text(R.chart.series[N].label).addClass("floatleft")).append($('<div class="clearfloat">')).addClass("floatleft"))}$("#gridchart"+runtime.chartAI).css("overflow","hidden").parent().append(S);if(M!=true){runtime.charts["c"+runtime.chartAI]=R;z()}$("#gridchart"+runtime.chartAI).bind("jqplotMouseDown",function(U,T,X,W,V){i=true;G.push(X.xaxis);if($("#selection_box").length){$("#selection_box").remove()}selectionBox=$('<div id="selection_box" style="z-index:1000;height:250px;position:absolute;background-color:#87CEEB;opacity:0.4;filter:alpha(opacity=40);pointer-events:none;">');$(document.body).append(selectionBox);d=U.pageX;c=U.pageY;selectionBox.attr({id:"selection_box"}).css({top:c-T.y,left:d}).fadeIn()});$("#gridchart"+runtime.chartAI).bind("jqplotMouseUp",function(W,U,Z,Y,X){if(!i||t){return}G.push(Z.xaxis);if(G[1]<=G[0]){G=[];return}var V=new Date(Math.ceil(G[0]));var T=new Date(Math.ceil(G[1]));x(V,T);G=[];i=false});$("#gridchart"+runtime.chartAI).bind("jqplotMouseMove",function(U,T,X,W,V){if(!i||t){return}if(d!=undefined){$("#selection_box").css({width:Math.ceil(U.pageX-d)}).fadeIn()}});$("#gridchart"+runtime.chartAI).bind("jqplotMouseLeave",function(U,T,X,W,V){i=false});$(document.body).mouseup(function(){if($("#selection_box").length){selectionBox.remove()}});$("#chartGrid div svg").find("*[zIndex=20], *[zIndex=21], *[zIndex=19]").toggle(t);runtime.chartAI++}function w(P){var R=P.options.chart.renderTo;if(!R){return}var O=null;var M=null;$.each(runtime.charts,function(S,T){if(T.chart.options.chart.renderTo==R){O=T;M=S;return false}});if(O==null){return}var Q="<p><b>"+PMA_messages.strChartTitle+': </b> <br/> <input type="text" size="35" name="chartTitle" value="'+O.title+'" />';Q+="</p><p><b>"+PMA_messages.strSeries+":</b> </p><ol>";for(var N=0;N<O.nodes.length;N++){Q+="<li><i>"+O.nodes[N].dataPoints[0].name+': </i><br/><input type="text" name="chartSerie-'+N+'" value="'+O.nodes[N].name+'" /></li>'}dlgBtns={};dlgBtns[PMA_messages.strSave]=function(){runtime.charts[M].title=$('#emptyDialog input[name="chartTitle"]').val();runtime.charts[M].chart.setTitle({text:runtime.charts[M].title});$('#emptyDialog input[name*="chartSerie"]').each(function(){var T=$(this);var S=T.attr("name").split("-")[1];runtime.charts[M].nodes[S].name=T.val();runtime.charts[M].chart.series[S].name=T.val()});$(this).dialog("close");e()};dlgBtns[PMA_messages.strCancel]=function(){$(this).dialog("close")};$("#emptyDialog").html(Q+"</ol>");$("#emptyDialog").dialog({title:PMA_messages.strChartEdit,width:"auto",height:"auto",buttons:dlgBtns})}function x(N,M){$('#logAnalyseDialog input[name="dateStart"]').val(formatDate(N,"yyyy-MM-dd HH:mm:ss"));$('#logAnalyseDialog input[name="dateEnd"]').val(formatDate(M,"yyyy-MM-dd HH:mm:ss"));var O={};O[PMA_messages.strFromSlowLog]=function(){H("slow",N,M);$(this).dialog("close")};O[PMA_messages.strFromGeneralLog]=function(){H("general",N,M);$(this).dialog("close")};$("#logAnalyseDialog").dialog({width:"auto",height:"auto",buttons:O})}function H(P,N,M){var Q=Date.parse($('#logAnalyseDialog input[name="dateStart"]').prop("value"))||N;var O=Date.parse($('#logAnalyseDialog input[name="dateEnd"]').prop("value"))||M;m({src:P,start:Q,end:O,removeVariables:$("#removeVariables").prop("checked"),limitTypes:$("#limitTypes").prop("checked")})}function L(M){var N=M.options.chart.renderTo;if(!N){return}$.each(runtime.charts,function(O,P){if(P.chart.options.chart.renderTo==N){delete runtime.charts[O];return false}});z();setTimeout(function(){M.destroy();$("#"+N).remove()},10);e()}function n(){runtime.refreshRequest=$.post("server_status_monitor.php?"+PMA_commonParams.get("common_query"),{ajax_request:true,chart_data:1,type:"chartgrid",requiredData:$.toJSON(runtime.dataList)},function(Q){var P;if(Q.success==true){P=Q.message}else{return serverResponseError()}var O,M=0;var R;var N;$.each(runtime.charts,function(W,V){var U=V.chartID;if(!P[U]){return}N=0;for(var T=0;T<V.nodes.length;T++){if(M==0&&T==0){if(q==null){R=P.x-runtime.xmax}else{R=parseInt(P.x-q.x)}runtime.xmin+=R;runtime.xmax+=R}if(V.nodes[T].transformFn){O=p(V.nodes[T].transformFn,P[U][T],(q==null||q[U]==null?null:q[U][T]))}else{O=parseFloat(P[U][T][0].value);if(V.nodes[T].display=="differential"){if(q==null||q[U]==null){continue}O-=q[U][T][0].value}if(V.nodes[T].valueDivisor){O=O/V.nodes[T].valueDivisor}}if(O!=undefined){V.chart.series[T].data.push([P.x,O]);if(O>V.maxYLabel){V.maxYLabel=O}else{if(V.maxYLabel==0){V.maxYLabel=0.5}}if(V.chart.series[T].data.length>runtime.gridMaxPoints&&V.chart.series[T].data[0][0]<runtime.xmin){if(V.maxYLabel<=V.chart.series[T].data[0][1]){V.chart.series[T].data.splice(0,V.chart.series[T].data.length-runtime.gridMaxPoints);V.maxYLabel=C(V.chart.series[T].data)}else{V.chart.series[T].data.splice(0,V.chart.series[T].data.length-runtime.gridMaxPoints)}}if(V.title===PMA_messages.strSystemMemory||V.title===PMA_messages.strSystemSwap){N+=O}}}var S=(runtime.xmax-runtime.xmin)/5;V.chart.axes["xaxis"].ticks=[(runtime.xmax-S*4),(runtime.xmax-S*3),(runtime.xmax-S*2),(runtime.xmax-S),runtime.xmax];if(V.title!==PMA_messages.strSystemCPUUsage&&V.title!==PMA_messages.strQueryCacheEfficiency&&V.title!==PMA_messages.strSystemMemory&&V.title!==PMA_messages.strSystemSwap){V.chart.axes["yaxis"]["max"]=Math.ceil(V.maxYLabel*1.1);V.chart.axes["yaxis"]["tickInterval"]=Math.ceil(V.maxYLabel*1.1/5)}else{if(V.title===PMA_messages.strSystemMemory||V.title===PMA_messages.strSystemSwap){V.chart.axes["yaxis"]["max"]=Math.ceil(N*1.1/100)*100;V.chart.axes["yaxis"]["tickInterval"]=Math.ceil(N*1.1/5)}}M++;if(runtime.redrawCharts){V.chart.replot()}});q=P;runtime.refreshTimeout=setTimeout(n,a.gridRefresh)})}function C(M){var N=M[0][1];$.each(M,function(P,O){N=(O[1]>N)?O[1]:N});return N}function p(N,R,P){switch(N){case"cpu-linux":if(P==null){return undefined}R=R[0];P=P[0];var Q=R.busy+R.idle-(P.busy+P.idle);var O=R.idle-P.idle;return 100*(Q-O)/Q;case"qce":if(P==null){return undefined}var M=R[0].value-P[0].value;if(R[1].value-P[1].value==0){return 0}return M/(R[1].value-P[1].value+M)*100;case"qcu":if(R[1].value==0){return 0}return 100-R[0].value/R[1].value*100}return undefined}function z(){runtime.dataList={};var M=0;$.each(runtime.charts,function(P,Q){runtime.dataList[M]=[];for(var O=0,N=Q.nodes.length;O<N;O++){runtime.dataList[M][O]=Q.nodes[O].dataPoints}runtime.charts[P].chartID=M;M++})}function m(O){var M="";var Q=null;if(!O.removeVariables){O.removeVariables=false}if(!O.limitTypes){O.limitTypes=false}$("#emptyDialog").dialog({title:PMA_messages.strAnalysingLogsTitle});$("#emptyDialog").html(PMA_messages.strAnalysingLogs+' <img class="ajaxIcon" src="'+pmaThemeImage+'ajax_clock_small.gif" alt="">');var N={};N[PMA_messages.strCancelRequest]=function(){if(Q!=null){Q.abort()}$(this).dialog("close")};$("#emptyDialog").dialog({width:"auto",height:"auto",buttons:N});Q=$.get("server_status_monitor.php?"+PMA_commonParams.get("common_query"),{ajax_request:true,log_data:1,type:O.src,time_start:Math.round(O.start/1000),time_end:Math.round(O.end/1000),removeVariables:O.removeVariables,limitTypes:O.limitTypes},function(T){var S;if(T.success==true){S=T.message}else{return serverResponseError()}if(S.rows.length!=0){runtime.logDataCols=g(S);$("#emptyDialog").dialog({title:PMA_messages.strLoadingLogs});$("#emptyDialog").html("<p>"+PMA_messages.strLogDataLoaded+"</p>");$.each(S.sum,function(U,V){U=U.charAt(0).toUpperCase()+U.slice(1).toLowerCase();if(U=="Total"){U="<b>"+U+"</b>"}$("#emptyDialog").append(U+": "+V+"<br/>")});if(S.numRows>12){$("#logTable").prepend('<fieldset id="logDataFilter">    <legend>'+PMA_messages.strFiltersForLogTable+'</legend>    <div class="formelement">        <label for="filterQueryText">'+PMA_messages.strFilterByWordRegexp+'</label>        <input name="filterQueryText" type="text" id="filterQueryText" style="vertical-align: baseline;" />    </div>'+((S.numRows>250)?' <div class="formelement"><button name="startFilterQueryText" id="startFilterQueryText">'+PMA_messages.strFilter+"</button></div>":"")+'    <div class="formelement">       <input type="checkbox" id="noWHEREData" name="noWHEREData" value="1" />        <label for="noWHEREData"> '+PMA_messages.strIgnoreWhereAndGroup+"</label>   </div</fieldset>");$("#logTable #noWHEREData").change(function(){P(true)});if(S.numRows>250){$("#logTable #startFilterQueryText").click(P)}else{$("#logTable #filterQueryText").keyup(P)}}var R={};R[PMA_messages.strJumpToTable]=function(){$(this).dialog("close");$(document).scrollTop($("#logTable").offset().top)};$("#emptyDialog").dialog("option","buttons",R)}else{$("#emptyDialog").dialog({title:PMA_messages.strNoDataFoundTitle});$("#emptyDialog").html("<p>"+PMA_messages.strNoDataFound+"</p>");var R={};R[PMA_messages.strClose]=function(){$(this).dialog("close")};$("#emptyDialog").dialog("option","buttons",R)}});function P(S){var U=false,R,ak;var ao=$("#logTable #filterQueryText").val();if(ao.length==0){ak=null}else{ak=new RegExp(ao,"i")}var af=0,X=0,ai=0,ad;var aj=$("#logTable #noWHEREData").prop("checked");var am=/([^=]+)=(\d+|((\'|"|).*?[^\\])\4((\s+)|$))/gi;var ae=/([a-z0-9_]+)\(.+?\)/gi;var V={},ag={};var ab=false,Y;var ac=runtime.logDataCols[runtime.logDataCols.length-2];var an=runtime.logDataCols[runtime.logDataCols.length-1];var T=O.src=="slow";var ah={};var al=function(aq,ar){var ap=ar.match(/<td>(.*?)<\/td>/gi);if(!ah[aq]){ah[aq]=[0,0,0,0]}ah[aq][0]+=b(ap[2].replace(/(<td>|<\/td>)/gi,""));ah[aq][1]+=b(ap[3].replace(/(<td>|<\/td>)/gi,""));ah[aq][2]+=parseInt(ap[4].replace(/(<td>|<\/td>)/gi,""));ah[aq][3]+=parseInt(ap[5].replace(/(<td>|<\/td>)/gi,""))};$("#logTable table tbody tr td:nth-child("+(runtime.logDataCols.length-1)+")").each(function(){var ap=$(this);if(S&&ap.html().match(/^SELECT/i)){if(aj){ad=ap.text().replace(am,"$1=...$6").trim();ad=ad.replace(ae," $1(...)");if(V[ad]){V[ad]+=parseInt(ap.next().text());X+=parseInt(ap.next().text());ab=true}else{V[ad]=parseInt(ap.next().text());ag[ad]=ai;ap.text(ad)}if(T){al(ad,ap.parent().html())}}else{Y=ap.parent().data("query");ap.text(Y[ac]);ap.next().text(Y[an]);if(T){ap.parent().children("td:nth-child(3)").text(Y.query_time);ap.parent().children("td:nth-child(4)").text(Y.lock_time);ap.parent().children("td:nth-child(5)").text(Y.rows_sent);ap.parent().children("td:nth-child(6)").text(Y.rows_examined)}}}if(!ab&&(ak!=null&&!ak.exec(ap.text()))){ab=true}if(ab){ap.parent().css("display","none")}else{X+=parseInt(ap.next().text());af++;U=!U;ap.parent().css("display","");if(U){ap.parent().addClass("odd");ap.parent().removeClass("even")}else{ap.parent().addClass("even");ap.parent().removeClass("odd")}}ab=false;ai++});if(S){if(aj){var aa,W,Z=$("#logTable table tbody");$.each(ag,function(ap,aq){if(V[ap]<=1){return}W=Z.children("tr:nth-child("+(aq+1)+")");aa=W.children(":nth-child("+(runtime.logDataCols.length)+")");aa.text(V[ap]);if(T){W.children("td:nth-child(3)").text(A(ah[ap][0]));W.children("td:nth-child(4)").text(A(ah[ap][1]));W.children("td:nth-child(5)").text(ah[ap][2]);W.children("td:nth-child(6)").text(ah[ap][3])}})}$("#logTable table").trigger("update");setTimeout(function(){$("#logTable table").trigger("sorton",[[[runtime.logDataCols.length-1,1]]])},0)}$("#logTable table tfoot tr").html('<th colspan="'+(runtime.logDataCols.length-1)+'">'+PMA_messages.strSumRows+" "+af+'<span style="float:right">'+PMA_messages.strTotal+'</span></th><th class="right">'+X+"</th>")}}function b(N){var M=N.split(":");return parseInt(M[0]*3600)+parseInt(M[1]*60)+parseInt(M[2])}function A(N){var M=Math.floor(N/3600);N-=M*3600;var O=Math.floor(N/60);N-=O*60;if(M<10){M="0"+M}if(O<10){O="0"+O}if(N<10){N="0"+N}return M+":"+O+":"+N}function g(Q){var Z=Q.rows;var U=[];var Y=$('<table class="sortable"></table>');var V,S,M;$("#logTable").html(Y);var R=function(aa,ab){switch(aa){case"user_host":return ab.replace(/(\[.*?\])+/g,"")}return ab};for(var P=0,N=Z.length;P<N;P++){if(P==0){$.each(Z[0],function(aa,ab){U.push(aa)});Y.append('<thead><tr><th class="nowrap">'+U.join('</th><th class="nowrap">')+"</th></tr></thead>");Y.append(V=$("<tbody></tbody>"))}V.append(S=$('<tr class="noclick"></tr>'));var X="";for(var O=0,T=U.length;O<T;O++){if(O==U.length-2&&Z[P][U[O]].match(/^SELECT/i)){S.append(M=$('<td class="linkElem">'+R(U[O],Z[P][U[O]])+"</td>"));M.click(r)}else{S.append("<td>"+R(U[O],Z[P][U[O]])+"</td>")}S.data("query",Z[P])}}Y.append('<tfoot><tr><th colspan="'+(U.length-1)+'">'+PMA_messages.strSumRows+" "+Q.numRows+'<span style="float:right">'+PMA_messages.strTotal+'</span></th><th class="right">'+Q.sum.TOTAL+"</th></tr></tfoot>");if($("#logTable th:last").html()=="#"){$("#logTable th:last").append("&nbsp;"+PMA_getImage("b_docs.png","",{"class":"qroupedQueryInfoIcon"}));var W=PMA_messages.strCountColumnExplanation;if(groupInserts){W+="<p>"+PMA_messages.strMoreCountColumnExplanation+"</p>"}PMA_tooltip($("img.qroupedQueryInfoIcon"),"img",W)}$("#logTable table").tablesorter({sortList:[[U.length-1,1]],widgets:["fast-zebra"]});$("#logTable table thead th").append('<img class="icon sortableIcon" src="themes/dot.gif" alt="">');return U}function r(){var O=$(this).parent().data("query");var N=O.argument||O.sql_text;if(codemirror_editor){N=PMA_SQLPrettyPrint(N);codemirror_editor.setValue(N);setTimeout(function(){codemirror_editor.refresh()},50)}else{$("#sqlquery").val(N)}var P=null;var M={};M[PMA_messages.strAnalyzeQuery]=function(){F(O)};M[PMA_messages.strClose]=function(){$(this).dialog("close")};$("#queryAnalyzerDialog").dialog({width:"auto",height:"auto",resizable:false,buttons:M,close:function(){if(P!=null){P.destroy()}$("#queryAnalyzerDialog div.placeHolder").html("");if(codemirror_editor){codemirror_editor.setValue("")}else{$("#sqlquery").val("")}}})}function F(N){var M=N.db||"";$("#queryAnalyzerDialog div.placeHolder").html(PMA_messages.strAnalyzing+' <img class="ajaxIcon" src="'+pmaThemeImage+'ajax_clock_small.gif" alt="">');$.post("server_status_monitor.php?"+PMA_commonParams.get("common_query"),{ajax_request:true,query_analyzer:true,query:codemirror_editor?codemirror_editor.getValue():$("#sqlquery").val(),database:M},function(U){if(U.success==true){U=U.message}else{$("#queryAnalyzerDialog div.placeHolder").html('<div class="error">'+U.error+"</div>");return}var O=0;$("#queryAnalyzerDialog div.placeHolder").html('<table width="100%" border="0"><tr><td class="explain"></td><td class="chart"></td></tr></table>');var W="<b>"+PMA_messages.strExplainOutput+"</b> "+$("#explain_docu").html();if(U.explain.length>1){W+=" (";for(var V=0;V<U.explain.length;V++){if(V>0){W+=", "}W+='<a href="#showExplain-'+V+'">'+V+"</a>"}W+=")"}W+="<p></p>";for(var V=0,P=U.explain.length;V<P;V++){W+='<div class="explain-'+V+'"'+(V>0?'style="display:none;"':"")+">";$.each(U.explain[V],function(X,Y){Y=(Y==null)?"null":Y;if(X=="type"&&Y.toLowerCase()=="all"){Y='<span class="attention">'+Y+"</span>"}if(X=="Extra"){Y=Y.replace(/(using (temporary|filesort))/gi,'<span class="attention">$1</span>')}W+=X+": "+Y+"<br />"});W+="</div>"}W+="<p><b>"+PMA_messages.strAffectedRows+"</b> "+U.affectedRows;$("#queryAnalyzerDialog div.placeHolder td.explain").append(W);$('#queryAnalyzerDialog div.placeHolder a[href*="#showExplain"]').click(function(){var X=$(this).attr("href").split("-")[1];$(this).parent().find('div[class*="explain"]').hide();$(this).parent().find('div[class*="explain-'+X+'"]').show()});if(U.profiling){var T=[];var S='<table class="queryNums"><thead><tr><th>'+PMA_messages.strStatus+"</th><th>"+PMA_messages.strTime+"</th></tr></thead><tbody>";var Q;var R=0;for(var V=0,P=U.profiling.length;V<P;V++){Q=parseFloat(U.profiling[V].duration);O+=Q;S+="<tr><td>"+U.profiling[V].state+" </td><td> "+PMA_prettyProfilingNum(Q,2)+"</td></tr>"}for(var V=0,P=U.profiling.length;V<P;V++){Q=parseFloat(U.profiling[V].duration);if(Q/O>0.02){T.push([PMA_prettyProfilingNum(Q,2)+" "+U.profiling[V].state,Q])}else{R+=Q}}if(R>0){T.push([PMA_prettyProfilingNum(R,2)+" "+PMA_messages.strOther,R])}S+="<tr><td><b>"+PMA_messages.strTotalTime+"</b></td><td>"+PMA_prettyProfilingNum(O,2)+"</td></tr>";S+="</tbody></table>";$("#queryAnalyzerDialog div.placeHolder td.chart").append("<b>"+PMA_messages.strProfilingResults+" "+$("#profiling_docu").html()+'</b> (<a href="#showNums">'+PMA_messages.strTable+'</a>, <a href="#showChart">'+PMA_messages.strChart+"</a>)<br/>"+S+' <div id="queryProfiling"></div>');$('#queryAnalyzerDialog div.placeHolder a[href="#showNums"]').click(function(){$("#queryAnalyzerDialog #queryProfiling").hide();$("#queryAnalyzerDialog table.queryNums").show();return false});$('#queryAnalyzerDialog div.placeHolder a[href="#showChart"]').click(function(){$("#queryAnalyzerDialog #queryProfiling").show();$("#queryAnalyzerDialog table.queryNums").hide();return false});profilingChart=PMA_createProfilingChartJqplot("queryProfiling",T)}})}function e(){var M={};$.each(runtime.charts,function(N,O){M[N]={};M[N].nodes=O.nodes;M[N].settings=O.settings;M[N].title=O.title;M[N].series=O.series;M[N].maxYLabel=O.maxYLabel});if(window.localStorage){window.localStorage.monitorCharts=$.toJSON(M);window.localStorage.monitorSettings=$.toJSON(a);window.localStorage.monitorVersion=l}$('a[href="#clearMonitorConfig"]').show()}});AJAX.registerOnload("server_status_monitor.js",function(){$('a[href="#pauseCharts"]').trigger("click")});function serverResponseError(){var a={};a[PMA_messages.strReloadPage]=function(){window.location.reload()};$("#emptyDialog").dialog({title:PMA_messages.strRefreshFailed});$("#emptyDialog").html(PMA_getImage("s_attention.png")+PMA_messages.strInvalidResponseExplanation);$("#emptyDialog").dialog({buttons:a})}function destroyGrid(){if(runtime.charts){$.each(runtime.charts,function(b,d){try{d.chart.destroy()}catch(c){}})}try{runtime.refreshRequest.abort()}catch(a){}try{clearTimeout(runtime.refreshTimeout)}catch(a){}$("#chartGrid").html("");runtime.charts=null;runtime.chartAI=0;monitorSettings=null};