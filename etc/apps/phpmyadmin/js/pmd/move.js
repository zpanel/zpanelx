var _change=0;var _staying=0;var show_relation_lines=true;AJAX.registerTeardown("pmd/move.js",function(){if($.FullScreen.supported){$(document).unbind($.FullScreen.prefix+"fullscreenchange")}});AJAX.registerOnload("pmd/move.js",function(){$("#page_content").css({"margin-left":"3px"});$("#exitFullscreen").hide();if($.FullScreen.supported){$(document).fullScreenChange(function(){if(!$.FullScreen.isFullScreen()){$("#page_content").removeClass("content_fullscreen").css({width:"auto",height:"auto"});$("#enterFullscreen").show();$("#exitFullscreen").hide();Top_menu_reposition($("#key_Left_Right")[0])}})}else{$("#enterFullscreen").hide()}});function make_zero(){_staying=0}var dx,dy,dy2;var cur_click;var sm_x=2,sm_y=2;var sm_s=0;var sm_add=10;var s_left=0;var s_right=0;var ON_relation=0;var ON_grid=0;var ON_display_field=0;var ON_angular_direct=1;var click_field=0;var link_relation="";var id_hint;var canvas_width=0;var canvas_height=0;var osn_tab_width=0;var osn_tab_height=0;var height_field=7;var Glob_X,Glob_Y;var timeoutID;var layer_menu_cur_click=0;var step=10;var old_class;var from_array=[];var downer;document.onmousedown=MouseDown;document.onmouseup=MouseUp;document.onmousemove=MouseMove;var isIE=document.all&&!window.opera;var isNN=!document.all&&document.getElementById;var isN4=document.layers;if(isIE){window.onscroll=General_scroll;document.onselectstart=function(){return false}}function MouseDown(c){var b,a;if(cur_click!=null){b=isIE?event.clientX+document.body.scrollLeft:c.pageX;a=isIE?event.clientY+document.body.scrollTop:c.pageY;dx=b-parseInt(cur_click.style.left);dy=a-parseInt(cur_click.style.top);document.getElementById("canvas").style.display="none";cur_click.style.zIndex=2}if(layer_menu_cur_click){b=c.pageX;dx=b-parseInt(document.getElementById("layer_menu").style.width)}}function MouseMove(c){Glob_X=isIE?event.clientX+document.body.scrollLeft:c.pageX;Glob_Y=isIE?event.clientY+document.body.scrollTop:c.pageY;if(cur_click!=null){_change=1;var b=Glob_X-dx;var a=Glob_Y-dy;b=b>0?b:0;a=a>0?a:0;if(ON_grid){b=b%step<step/2?b-b%step:b-b%step+step;a=a%step<step/2?a-a%step:a-a%step+step}cur_click.style.left=b+"px";cur_click.style.top=a+"px"}if(ON_relation||ON_display_field){document.getElementById("pmd_hint").style.left=(Glob_X+20)+"px";document.getElementById("pmd_hint").style.top=(Glob_Y+20)+"px"}if(layer_menu_cur_click){document.getElementById("layer_menu").style.width=((Glob_X-dx)>=150?Glob_X-dx:150)+"px"}}function MouseUp(a){if(cur_click!=null){document.getElementById("canvas").style.display="inline-block";Re_load();cur_click.style.zIndex=1;cur_click=null}layer_menu_cur_click=0}function Canvas_pos(){canvas_width=document.getElementById("canvas").width=osn_tab_width-3;canvas_height=document.getElementById("canvas").height=osn_tab_height-3;if(isIE){document.getElementById("canvas").style.width=((osn_tab_width-3)?(osn_tab_width-3):0)+"px";document.getElementById("canvas").style.height=((osn_tab_height-3)?(osn_tab_height-3):0)+"px"}}function Osn_tab_pos(){osn_tab_width=parseInt(document.getElementById("osn_tab").style.width);osn_tab_height=parseInt(document.getElementById("osn_tab").style.height)}function Main(){document.getElementById("layer_menu").style.top=-1000+"px";sm_x+=document.getElementById("osn_tab").offsetLeft;sm_y+=document.getElementById("osn_tab").offsetTop;Osn_tab_pos();Canvas_pos();Small_tab_refresh();Re_load();id_hint=document.getElementById("pmd_hint");if(isIE){General_scroll()}}function Rezize_osn_tab(){var e=0;var d=0;for(var c in j_tabs){var b=parseInt(document.getElementById(c).style.left)+document.getElementById(c).offsetWidth;var a=parseInt(document.getElementById(c).style.top)+document.getElementById(c).offsetHeight;e=e<b?b:e;d=d<a?a:d}osn_tab_width=e+50;osn_tab_height=d+50;Canvas_pos();document.getElementById("osn_tab").style.width=osn_tab_width+"px";document.getElementById("osn_tab").style.height=osn_tab_height+"px"}function Re_load(){Rezize_osn_tab();var e;var d;var b;var q=[];var m;var s;var p;var l;Clear();for(m in contr){for(s in contr[m]){for(p in contr[m][s]){for(l in contr[m][s][p]){if(!document.getElementById("check_vis_"+p).checked||!document.getElementById("check_vis_"+contr[m][s][p][l][0]).checked){continue}var c=document.getElementById(p).offsetLeft+1;var t=c+document.getElementById(p).offsetWidth;var g=document.getElementById(contr[m][s][p][l][0]).offsetLeft;var j=g+document.getElementById(contr[m][s][p][l][0]).offsetWidth;q[0]=Math.abs(c-g);q[1]=Math.abs(c-j);q[2]=Math.abs(t-g);q[3]=Math.abs(t-j);e=s_left=s_right=0;for(var f=1;f<4;f++){if(q[e]>q[f]){e=f}}if(e==1){d=c-sm_s;b=j+sm_s;if(d<b){e=0}}if(e==2){d=t+sm_s;b=g-sm_s;if(d>b){e=0}}if(e==3){d=t+sm_s;b=j+sm_s;s_right=1}if(e==0){d=c-sm_s;b=g-sm_s;s_left=1}var h=0;var r=document.getElementById("id_hide_tbody_"+p);if(r.innerHTML=="v"){h=document.getElementById(p+"."+l).offsetTop}var o=document.getElementById(p).offsetTop+h+height_field;h=0;var r=document.getElementById("id_hide_tbody_"+contr[m][s][p][l][0]);if(r.innerHTML=="v"){h=document.getElementById(contr[m][s][p][l][0]+"."+contr[m][s][p][l][1]).offsetTop}var k=document.getElementById(contr[m][s][p][l][0]).offsetTop+h+height_field;Line0(d-sm_x,o-sm_y,b-sm_x,k-sm_y,getColorByTarget(contr[m][s][p][l][0]+"."+contr[m][s][p][l][1]))}}}}}function Line(e,g,c,f,a){var d=document.getElementById("canvas");var b=d.getContext("2d");b.strokeStyle=a;b.lineWidth=1;b.beginPath();b.moveTo(e,g);b.lineTo(c,f);b.stroke()}function Line0(c,e,b,d,a){if(!show_relation_lines){return}Circle(c,e,3,3,a);Rect(b-1,d-2,4,4,a);if(ON_angular_direct){Line2(c,e,b,d,a)}else{Line3(c,e,b,d,a)}}function Line2(c,e,b,d,a){var f=c;var g=b;if(s_right){f+=sm_add;g+=sm_add}else{if(s_left){f-=sm_add;g-=sm_add}else{if(c<b){f+=sm_add;g-=sm_add}else{f-=sm_add;g+=sm_add}}}Line(c,e,f,e,a);Line(b,d,g,d,a);Line(f,e,g,d,a)}function Line3(d,f,c,e,a){var g=d;var h=c;if(s_right){if(d<c){g+=c-d+sm_add;h+=sm_add}else{h+=d-c+sm_add;g+=sm_add}Line(d,f,g,f,a);Line(c,e,h,e,a);Line(g,f,h,e,a);return}if(s_left){if(d<c){h-=c-d+sm_add;g-=sm_add}else{g-=d-c+sm_add;h-=sm_add}Line(d,f,g,f,a);Line(c,e,h,e,a);Line(g,f,h,e,a);return}var b=(d+c)/2;Line(d,f,b,f,a);Line(b,e,c,e,a);Line(b,f,b,e,a)}function Circle(a,f,e,c,d){var b=document.getElementById("canvas").getContext("2d");b.beginPath();b.moveTo(a,f);b.lineWidth=c;b.strokeStyle=d;b.arc(a,f,e,0,2*Math.PI,true);b.stroke()}function Clear(){var b=document.getElementById("canvas");var a=b.getContext("2d");a.clearRect(0,0,canvas_width,canvas_height)}function Rect(d,f,b,e,c){var a=document.getElementById("canvas").getContext("2d");a.fillStyle=c;a.fillRect(d,f,b,e)}function Enter_fullscreen(){if(!$.FullScreen.isFullScreen()){$("#enterFullscreen").hide();$("#exitFullscreen").show();$("#page_content").addClass("content_fullscreen").css({width:screen.width-5,height:screen.height-5}).requestFullScreen();Top_menu_reposition($("#key_Left_Right")[0])}}function Exit_fullscreen(){if($.FullScreen.isFullScreen()){$.FullScreen.cancelFullScreen()}}function Save(a){for(var b in j_tabs){document.getElementById("t_x_"+b+"_").value=parseInt(document.getElementById(b).style.left);document.getElementById("t_y_"+b+"_").value=parseInt(document.getElementById(b).style.top);document.getElementById("t_v_"+b+"_").value=document.getElementById("id_tbody_"+b).style.display=="none"?0:1;document.getElementById("t_h_"+b+"_").value=document.getElementById("check_vis_"+b).checked?1:0}document.form1.action=a;$(document.form1).submit()}function Get_url_pos(){var b="";for(var a in j_tabs){b+="&t_x["+a+"]="+parseInt(document.getElementById(a).style.left);b+="&t_y["+a+"]="+parseInt(document.getElementById(a).style.top);b+="&t_v["+a+"]="+(document.getElementById("id_tbody_"+a).style.display=="none"?0:1);b+="&t_h["+a+"]="+(document.getElementById("check_vis_"+a).checked?1:0)}return b}function Save2(){_change=0;var a="IS_AJAX=1&server="+server+"&db="+db+"&token="+token+"&die_save_pos=1";a+=Get_url_pos();makeRequest("pmd_save_pos.php",a)}function Grid(){if(!ON_grid){ON_grid=1;document.getElementById("grid_button").className="M_butt_Selected_down"}else{document.getElementById("grid_button").className="M_butt";ON_grid=0}}function Angular_direct(){if(ON_angular_direct){ON_angular_direct=0;document.getElementById("angular_direct_button").className="M_butt_Selected_down"}else{ON_angular_direct=1;document.getElementById("angular_direct_button").className="M_butt"}Re_load()}function Start_relation(){if(ON_display_field){return}if(!ON_relation){document.getElementById("foreign_relation").style.display="";ON_relation=1;document.getElementById("pmd_hint").innerHTML=PMA_messages.strSelectReferencedKey;document.getElementById("pmd_hint").style.display="block";document.getElementById("rel_button").className="M_butt_Selected_down"}else{document.getElementById("pmd_hint").innerHTML="";document.getElementById("pmd_hint").style.display="none";document.getElementById("rel_button").className="M_butt";click_field=0;ON_relation=0}}function Click_field(a,c,b){if(ON_relation){if(!click_field){if(!b){alert(PMA_messages.strPleaseSelectPrimaryOrUniqueKey);return}if(j_tabs[db+"."+a]!="1"){document.getElementById("foreign_relation").style.display="none"}click_field=1;link_relation="T1="+a+"&F1="+c;document.getElementById("pmd_hint").innerHTML=PMA_messages.strSelectForeignKey}else{Start_relation();if(j_tabs[db+"."+a]!="1"||!b){document.getElementById("foreign_relation").style.display="none"}var e=Glob_X-(document.getElementById("layer_new_relation").offsetWidth>>1);document.getElementById("layer_new_relation").style.left=e+"px";var d=Glob_Y-document.getElementById("layer_new_relation").offsetHeight;document.getElementById("layer_new_relation").style.top=d+"px";document.getElementById("layer_new_relation").style.display="block";link_relation+="&T2="+a+"&F2="+c}}if(ON_display_field){if(display_field[a]==c){old_class="tab_field";delete display_field[a]}else{old_class="tab_field_3";if(display_field[a]){document.getElementById("id_tr_"+a+"."+display_field[a]).className="tab_field";delete display_field[a]}display_field[a]=c}ON_display_field=0;document.getElementById("pmd_hint").innerHTML="";document.getElementById("pmd_hint").style.display="none";document.getElementById("display_field_button").className="M_butt";makeRequest("pmd_display_field.php","T="+a+"&F="+c+"&server="+server+"&db="+db+"&token="+token)}}function New_relation(){document.getElementById("layer_new_relation").style.display="none";link_relation+="&server="+server+"&db="+db+"&token="+token+"&die_save_pos=0";link_relation+="&on_delete="+document.getElementById("on_delete").value+"&on_update="+document.getElementById("on_update").value;link_relation+=Get_url_pos();makeRequest("pmd_relation_new.php",link_relation)}function Start_table_new(){PMA_commonParams.set("table","");PMA_commonActions.refreshMain("tbl_create.php")}function Start_tab_upd(a){PMA_commonParams.set("table",a);PMA_commonActions.refreshMain("tbl_structure.php")}function Small_tab_all(b){if(b.alt=="v"){for(var a in j_tabs){if(document.getElementById("id_hide_tbody_"+a).innerHTML=="v"){Small_tab(a,0)}}b.alt=">";b.src=pmaThemeImage+"pmd/rightarrow1.png"}else{for(var a in j_tabs){if(document.getElementById("id_hide_tbody_"+a).innerHTML!="v"){Small_tab(a,0)}}b.alt="v";b.src=pmaThemeImage+"pmd/downarrow1.png"}Re_load()}function Small_tab_invert(){for(var a in j_tabs){Small_tab(a,0)}Re_load()}function Relation_lines_invert(){show_relation_lines=!show_relation_lines;Re_load()}function Small_tab_refresh(){for(var a in j_tabs){if(document.getElementById("id_hide_tbody_"+a).innerHTML!="v"){Small_tab(a,0);Small_tab(a,0)}}}function Small_tab(a,c){var e=document.getElementById("id_tbody_"+a);var d=document.getElementById("id_hide_tbody_"+a);var b=document.getElementById(a);b.style.width=b.offsetWidth+"px";if(d.innerHTML=="v"){e.style.display="none";d.innerHTML=">"}else{e.style.display="";d.innerHTML="v"}if(c){Re_load()}}function Select_tab(b){var a=document.getElementById("id_zag_"+b);if(a.className!="tab_zag_3"){document.getElementById("id_zag_"+b).className="tab_zag_2"}else{document.getElementById("id_zag_"+b).className="tab_zag"}var c=document.getElementById(b);window.scrollTo(parseInt(c.style.left)-300,parseInt(c.style.top)-300);setTimeout(function(){document.getElementById("id_zag_"+b).className="tab_zag"},800)}function Canvas_click(q){var s=0;var t=0;var r=0;var z=[];var j,g,f,d,k,x,w;var m,D,A,y;var C=$.FullScreen.isFullScreen()?Glob_X:Glob_X-document.getElementById("canvas_outer").offsetLeft;var B=Glob_Y-document.getElementById("canvas_outer").offsetTop;Clear();for(m in contr){for(D in contr[m]){for(A in contr[m][D]){for(y in contr[m][D][A]){if(!document.getElementById("check_vis_"+A).checked||!document.getElementById("check_vis_"+contr[m][D][A][y][0]).checked){continue}var l=document.getElementById(A).offsetLeft+1;var v=l+document.getElementById(A).offsetWidth;var o=document.getElementById(contr[m][D][A][y][0]).offsetLeft;var e=o+document.getElementById(contr[m][D][A][y][0]).offsetWidth;z[0]=Math.abs(l-o);z[1]=Math.abs(l-e);z[2]=Math.abs(v-o);z[3]=Math.abs(v-e);s=s_left=s_right=0;for(var u=1;u<4;u++){if(z[s]>z[u]){s=u}}if(s==1){x=l-sm_s;w=e+sm_s;if(x<w){s=0}}if(s==2){x=v+sm_s;w=o-sm_s;if(x>w){s=0}}if(s==3){x=v+sm_s;w=e+sm_s;s_right=1}if(s==0){x=l-sm_s;w=o-sm_s;s_left=1}var c=document.getElementById(A).offsetTop+document.getElementById(A+"."+y).offsetTop+height_field;var b=document.getElementById(contr[m][D][A][y][0]).offsetTop+document.getElementById(contr[m][D][A][y][0]+"."+contr[m][D][A][y][1]).offsetTop+height_field;if(!r&&C>x-10&&C<x+10&&B>c-7&&B<c+7){Line0(x-sm_x,c-sm_y,w-sm_x,b-sm_y,"rgba(255,0,0,1)");r=1;t=D;j=contr[m][D][A][y][0];g=contr[m][D][A][y][1];f=A;d=y;k=m}else{Line0(x-sm_x,c-sm_y,w-sm_x,b-sm_y,getColorByTarget(contr[m][D][A][y][0]+"."+contr[m][D][A][y][1]))}}}}}if(r){var h=Glob_X-(document.getElementById("layer_upd_relation").offsetWidth>>1);document.getElementById("layer_upd_relation").style.left=h+"px";var p=Glob_Y-document.getElementById("layer_upd_relation").offsetHeight-10;document.getElementById("layer_upd_relation").style.top=p+"px";document.getElementById("layer_upd_relation").style.display="block";link_relation="T1="+j+"&F1="+g+"&T2="+f+"&F2="+d+"&K="+k}}function Upd_relation(){document.getElementById("layer_upd_relation").style.display="none";link_relation+="&server="+server+"&db="+db+"&token="+token+"&die_save_pos=0";link_relation+=Get_url_pos();makeRequest("pmd_relation_upd.php",link_relation)}function VisibleTab(b,a){if(b.checked){document.getElementById(a).style.display="block"}else{document.getElementById(a).style.display="none"}Re_load()}function Hide_tab_all(c){if(c.alt=="v"){c.alt=">";c.src=pmaThemeImage+"pmd/rightarrow1.png"}else{c.alt="v";c.src=pmaThemeImage+"pmd/downarrow1.png"}var b=document.form1;for(var a=0;a<b.elements.length;a++){if(b.elements[a].type=="checkbox"&&b.elements[a].id.substring(0,10)=="check_vis_"){if(c.alt=="v"){b.elements[a].checked=true;document.getElementById(b.elements[a].value).style.display=""}else{b.elements[a].checked=false;document.getElementById(b.elements[a].value).style.display="none"}}}Re_load()}function in_array_k(d,c){var a=0;for(var e in c){if(d==e){a=1;break}}return a}function No_have_constr(j){var c=[];var b,f,g,e;for(b in contr){for(f in contr[b]){for(g in contr[b][f]){for(e in contr[b][f][g]){c[g]=c[contr[b][f][g][e][0]]=1}}}}if(j.alt=="v"){j.alt=">";j.src=pmaThemeImage+"pmd/rightarrow2.png"}else{j.alt="v";j.src=pmaThemeImage+"pmd/downarrow2.png"}var h=document.form1;for(var d=0;d<h.elements.length;d++){if(h.elements[d].type=="checkbox"&&h.elements[d].id.substring(0,10)=="check_vis_"){if(!in_array_k(h.elements[d].value,c)){if(j.alt=="v"){h.elements[d].checked=true;document.getElementById(h.elements[d].value).style.display=""}else{h.elements[d].checked=false;document.getElementById(h.elements[d].value).style.display="none"}}}}}function PDF_save(){Save("pmd_pdf.php?server="+server+"&token="+token+"&db="+db)}function General_scroll(){clearTimeout(timeoutID);timeoutID=setTimeout(function(){document.getElementById("top_menu").style.left=document.body.scrollLeft+"px";document.getElementById("top_menu").style.top=document.body.scrollTop+"px"},200)}function Show_left_menu(c){if(c.alt=="v"){var b=$("#top_menu").offset();var a=$("#top_menu").height();document.getElementById("layer_menu").style.top="0px";document.getElementById("layer_menu").style.display="block";c.alt=">";c.src=pmaThemeImage+"pmd/uparrow2_m.png";if(isIE){General_scroll()}}else{document.getElementById("layer_menu").style.top=-1000+"px";document.getElementById("layer_menu").style.display="none";c.alt="v";c.src=pmaThemeImage+"pmd/downarrow2_m.png"}}function Top_menu_right(a){if(a.alt==">"){moveTopMenuToRight(a);a.alt="<";a.src=pmaThemeImage+"pmd/2leftarrow_m.png"}else{document.getElementById("top_menu").style.paddingLeft=0;a.alt=">";a.src=pmaThemeImage+"pmd/2rightarrow_m.png"}}function Top_menu_reposition(a){if(a.alt=="<"){moveTopMenuToRight(a)}}function moveTopMenuToRight(c){var a=10;$("#top_menu").children().each(function(){a+=$(this).outerWidth(true)});var b=parseInt(document.getElementById("canvas_outer").offsetWidth-a,10);document.getElementById("top_menu").style.paddingLeft=b+"px"}function Start_display_field(){if(ON_relation){return}if(!ON_display_field){ON_display_field=1;document.getElementById("pmd_hint").innerHTML=PMA_messages.strChangeDisplay;document.getElementById("pmd_hint").style.display="block";document.getElementById("display_field_button").className="M_butt_Selected_down";if(isIE){document.getElementById("display_field_button").className="M_butt_Selected_down_IE"}}else{document.getElementById("pmd_hint").innerHTML="";document.getElementById("pmd_hint").style.display="none";document.getElementById("display_field_button").className="M_butt";ON_display_field=0}}var TargetColors=[];function getColorByTarget(p){var k="";for(var m in TargetColors){if(TargetColors[m][0]==p){k=TargetColors[m][1];break}}if(k.length==0){var m=TargetColors.length+1;var q=m%6;var l=(m-q)/6;l=l%4;l++;var h=new Array(new Array(1,0,0),new Array(0,1,0),new Array(0,0,1),new Array(1,1,0),new Array(1,0,1),new Array(0,1,1));var u=h[q][0];var t=h[q][1];var s=h[q][2];var o=(1-(l-1)/6);var f=Math.round(u*200*o);var n=Math.round(t*200*o);var t=Math.round(s*200*o);var k="rgba("+f+","+n+","+t+",1)";TargetColors.push(new Array(p,k))}return k}function Click_option(d,c,a){var b=Glob_X-(document.getElementById(d).offsetWidth>>1);document.getElementById(d).style.left=b+"px";document.getElementById(d).style.top=(screen.height/4)+"px";document.getElementById(d).style.display="block";document.getElementById("option_col_name").innerHTML="<strong>"+PMA_messages.strAddOption+'"'+c+'"</strong>';col_name=c;tab_name=a}function Close_option(){document.getElementById("pmd_optionse").style.display="none"}function Select_all(g,a){var f=document.form1;downer=a;var d;var c;var e=[];for(d=0;d<f.elements.length;d++){if(f.elements[d].type=="checkbox"&&f.elements[d].id.substring(0,(9+g.length))=="select_"+g+"._"){if(document.getElementById("select_all_"+g).checked==true){f.elements[d].checked=true;f.elements[d].disabled=true;var b="`"+g.substring(a.length+1)+"`.*"}else{f.elements[d].checked=false;f.elements[d].disabled=false}}}if(document.getElementById("select_all_"+g).checked==true){select_field.push("`"+g.substring(a.length+1)+"`.*");e=g.split(".");from_array.push(e[1])}else{for(d=0;d<select_field.length;d++){if(select_field[d]==("`"+g.substring(a.length+1)+"`.*")){select_field.splice(d,1)}}for(c=0;c<from_array.length;c++){if(from_array[c]==g){from_array.splice(c,1);break}}}Re_load()}function Table_onover(c,a,b){if(!a){document.getElementById("id_zag_"+c).className="tab_zag_2";if(b){document.getElementById("id_zag_"+c+"_2").className="tab_zag_2"}}else{document.getElementById("id_zag_"+c).className="tab_zag";if(b){document.getElementById("id_zag_"+c+"_2").className="tab_zag"}}}function store_column(e,a,c){var d;var b;if(document.getElementById("select_"+a+"."+e+"._"+c).checked==true){select_field.push("`"+e+"`.`"+c+"`");from_array.push(e)}else{for(d=0;d<select_field.length;d++){if(select_field[d]==("`"+e+"`.`"+c+"`")){select_field.splice(d,1);break}}for(b=0;b<from_array.length;b++){if(from_array[b]==e){from_array.splice(b,1);break}}}}function add_object(){var a=document.getElementById("rel_opt");var c=0;var h=history_array.length;if(a.value!="--"){if(document.getElementById("Query").value==""){document.getElementById("pmd_hint").innerHTML="value/subQuery is empty";document.getElementById("pmd_hint").style.display="block";return}var f=document.getElementById("Query");var e=new where(a.value,f.value);history_array.push(new history(col_name,e,tab_name,h_tabs[downer+"."+tab_name],"Where"));c=c+1;a.value="--";f.value=""}if(document.getElementById("new_name").value!=""){var d=new rename(document.getElementById("new_name").value);history_array.push(new history(col_name,d,tab_name,h_tabs[downer+"."+tab_name],"Rename"));c=c+1;document.getElementById("new_name").value=""}if(document.getElementById("operator").value!="---"){var b=new aggregate(document.getElementById("operator").value);history_array.push(new history(col_name,b,tab_name,h_tabs[downer+"."+tab_name],"Aggregate"));c=c+1;document.getElementById("operator").value="---"}if(document.getElementById("groupby").checked==true){history_array.push(new history(col_name,"GroupBy",tab_name,h_tabs[downer+"."+tab_name],"GroupBy"));c=c+1;document.getElementById("groupby").checked=false}if(document.getElementById("h_rel_opt").value!="--"){if(document.getElementById("having").value==""){document.getElementById("pmd_hint").innerHTML="value/subQuery is empty";document.getElementById("pmd_hint").style.display="block";return}var f=document.getElementById("having");var e=new having(document.getElementById("h_rel_opt").value,f.value,document.getElementById("h_operator").value);history_array.push(new history(col_name,e,tab_name,h_tabs[downer+"."+tab_name],"Having"));c=c+1;document.getElementById("h_rel_opt").value="--";document.getElementById("h_operator").value="---";f.value=""}if(document.getElementById("orderby").checked==true){history_array.push(new history(col_name,"OrderBy",tab_name,h_tabs[downer+"."+tab_name],"OrderBy"));c=c+1;document.getElementById("orderby").checked=false}PMA_ajaxShowMessage($.sprintf(PMA_messages.strObjectsCreated,c));var g=document.getElementById("ab");g.innerHTML=display(h,history_array.length);Close_option();panel(0)};